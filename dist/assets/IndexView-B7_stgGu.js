import{d as I,u as Z,a as J,b as K,r as z,o as Q,c as W,e as a,w as l,f as X,g as p,h as i,t as A,i as u,s as Y,U as $}from"./index-BZJQ1lxK.js";import{z as ee,a as s,N as re}from"./NikkToast-C8QlIS5k.js";import{_ as M}from"./NikkInputPassword.vue_vue_type_script_setup_true_lang-NABk0LF7.js";import{_ as t}from"./NikkInputText.vue_vue_type_script_setup_true_lang-CwrLwuP9.js";import{_ as ae}from"./NikkSelect.vue_vue_type_script_setup_true_lang-CwL90KmP.js";import"./index-BiWdUJBG.js";const se={class:"w-full p-3 overflow-y-auto"},oe={class:"text-center text-3xl md:text-4xl font-light mb-0"},le={class:"flex items-center justify-center"},ie={class:"font-light text-sm me-1"},be=I({__name:"IndexView",setup(te){const n=Z(),c=X(),j=J(),{t:O}=K(),b=new re(j,O),d=z(!1),R=ee(s.object({email:s.string().email({message:"errors.validation.email"}),firstName:s.string().min(1,{message:"errors.validation.requiredField"}),gender:s.string().min(1,{message:"errors.validation.requiredField"}),lastName:s.string().min(1,{message:"errors.validation.requiredField"}),password:s.string().min(8,{message:"errors.validation.passwords.minCount"}).refine(e=>/[a-z]/.test(e),{message:"errors.validation.mustContain.lowercase"}).refine(e=>/[A-Z]/.test(e),{message:"errors.validation.mustContain.uppercase"}).refine(e=>/d/.test(e),{message:"errors.validation.mustContain.number"}),password_confirmation:s.string().min(8,{message:"errors.validation.passwords.minCount"}),phone:s.string().min(1,{message:"errors.validation.requiredField"})}).refine(e=>e.password===e.password_confirmation,{message:"errors.validation.passwords.notSame",path:["password_confirmation"]})),m=z({email:"",firstName:"",gender:"",lastName:"",phone:"",password:"",password_confirmation:""});async function T(e){d.value=!0;try{e.valid?(await n.register(e.values),n.userModel&&n.userModel.isAdmin()?c.push({name:"admin.dashboard"}):c.push({name:"dashboard"})):b.error("errors.validation.form","labels.invalidForm")}catch(o){b.httpError(o)}finally{d.value=!1}}return(e,o)=>{const g=p("PrimeButton"),U=p("router-link"),D=p("PrimeCard");return Q(),W("div",se,[a(D,{class:"w-full md:w-4/12 2xl:w-3/12 mx-auto mt-10 nikk-card"},{title:l(()=>[i("div",null,[i("h1",oe,A(e.$t("labels.register")),1),i("div",le,[i("span",ie,A(e.$t("hints.alreadyHaveAccount")),1),a(U,{to:"/login",activeClass:"border-b border-primary"},{default:l(()=>[a(g,{text:"",label:e.$t("labels.login")},null,8,["label"])]),_:1})])])]),content:l(()=>[a(u(Y),{class:"py-3 flex flex-col gap-5",initialValues:m.value,onSubmit:T,resolver:u(R),validateOnBlur:!0,validateOnSubmit:!0},{default:l(r=>{var f,v,_,w,h,N,E,x,y,k,C,H,L,F,S,V,B,q,P;return[a(t,{errorHelpLabel:(v=(f=r.firstName)==null?void 0:f.error)==null?void 0:v.message,id:"first-name",isError:(_=r.firstName)==null?void 0:_.invalid,label:"labels.firstName",name:"firstName",type:"text"},null,8,["errorHelpLabel","isError"]),a(t,{errorHelpLabel:(h=(w=r.lastName)==null?void 0:w.error)==null?void 0:h.message,id:"last-name",isError:(N=r.lastName)==null?void 0:N.invalid,label:"labels.lastName",name:"lastName",type:"text"},null,8,["errorHelpLabel","isError"]),a(ae,{id:"type",modelValue:m.value.gender,"onUpdate:modelValue":o[0]||(o[0]=G=>m.value.gender=G),"error-help-label":"errors.validation.requiredField","is-error":(E=r.gender)==null?void 0:E.invalid,name:"gender",options:Object.values(u($).GENDERS),placeholder:"labels.selectGender"},null,8,["modelValue","is-error","options"]),a(t,{errorHelpLabel:(y=(x=r.email)==null?void 0:x.error)==null?void 0:y.message,id:"email",isError:(k=r.email)==null?void 0:k.invalid,label:"labels.email",name:"email",type:"email"},null,8,["errorHelpLabel","isError"]),a(t,{errorHelpLabel:(H=(C=r.phone)==null?void 0:C.error)==null?void 0:H.message,id:"phone",isError:(L=r.phone)==null?void 0:L.invalid,label:"labels.phone",name:"phone",type:"text"},null,8,["errorHelpLabel","isError"]),a(M,{errorHelpLabel:(S=(F=r.password)==null?void 0:F.error)==null?void 0:S.message,id:"password",isError:(V=r.password)==null?void 0:V.invalid,label:"labels.password",name:"password",toggleMask:!0,feedback:!1},null,8,["errorHelpLabel","isError"]),a(M,{errorHelpLabel:(q=(B=r.password_confirmation)==null?void 0:B.error)==null?void 0:q.message,id:"password_confirmation",isError:(P=r.password_confirmation)==null?void 0:P.invalid,label:"labels.confirmPassword",name:"password_confirmation",toggleMask:!0,feedback:!1},null,8,["errorHelpLabel","isError"]),a(g,{type:"submit",loading:d.value,label:e.$t("labels.register")},null,8,["loading","label"])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{be as default};
