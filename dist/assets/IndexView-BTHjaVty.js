import{z as S,a as m,N as $}from"./NikkToast-CikyFmnK.js";import{d as H,u as V,r as k,a as L,b as j,o as z,c as A,e as t,w as r,f as R,k as T,g as u,h as a,t as p,i as x,s as q}from"./index-BB-1uRwJ.js";import{_ as I}from"./NikkInputText.vue_vue_type_script_setup_true_lang-Bk9-Qpho.js";import{_ as O}from"./NikkInputPassword.vue_vue_type_script_setup_true_lang-CPjqrze_.js";import"./index-DLGx31fi.js";const D={class:"w-full p-3 overflow-y-auto"},M={class:"text-center text-3xl md:text-4xl font-light mb-0"},G={class:"flex items-center justify-center"},J={class:"font-light text-sm me-1"},K={class:"flex items-center justify-center"},Q={class:"font-light text-sm me-1"},se=H({__name:"IndexView",setup(U){const l=V(),i=k(!1),n=R(),f=T(),C=L(),{t:B}=j(),d=new $(C,B),E=k({email:"",password:""}),F=S(m.object({email:m.string().email({message:"errors.validation.email"}),password:m.string().min(8,{message:"errors.validation.passwords.minCount"})}));async function N(e){var c;i.value=!0;try{e.valid?(await l.login(e.values),f.query.redirect?n.push(`${f.query.redirect}`):l.user&&l.user.isAdmin()?n.push({name:"admin.dashboard"}):n.push({name:"dashboard"})):d.error("errors.validation.form","labels.invalidForm")}catch(s){((c=s==null?void 0:s.response)==null?void 0:c.status)==422?d.error("messages.credentialsNotFound","labels.loginFailed"):d.httpError(s)}finally{i.value=!1}}return(e,c)=>{const s=u("PrimeButton"),b=u("router-link"),P=u("PrimeCard");return z(),A("div",D,[t(P,{class:"w-full md:w-4/12 2xl:w-3/12 mx-auto mt-10 nikk-card"},{title:r(()=>[a("div",null,[a("h1",M,p(e.$t("labels.login")),1),a("div",G,[a("span",J,p(e.$t("hints.doNotHaveAccount")),1),t(b,{to:"/register",activeClass:"border-b border-primary"},{default:r(()=>[t(s,{text:"",label:e.$t("labels.register")},null,8,["label"])]),_:1})])])]),content:r(()=>[t(x(q),{class:"py-3 flex flex-col gap-5",initialValues:E.value,onSubmit:N,resolver:x(F),validateOnBlur:!0,validateOnSubmit:!0},{default:r(o=>{var _,v,g,h,w,y;return[t(I,{errorHelpLabel:(v=(_=o.email)==null?void 0:_.error)==null?void 0:v.message,id:"email",isError:(g=o.email)==null?void 0:g.invalid,label:"labels.email",name:"email",type:"email"},null,8,["errorHelpLabel","isError"]),t(O,{errorHelpLabel:(w=(h=o.password)==null?void 0:h.error)==null?void 0:w.message,id:"password",isError:(y=o.password)==null?void 0:y.invalid,label:"labels.password",name:"password",toggleMask:!0,feedback:!1},null,8,["errorHelpLabel","isError"]),a("div",K,[a("span",Q,p(e.$t("hints.forgotPassword")),1),t(b,{to:"/forgot-password",activeClass:"border-b border-primary"},{default:r(()=>[t(s,{text:"",severity:"danger",label:e.$t("labels.resetPassword")},null,8,["label"])]),_:1})]),t(s,{type:"submit",loading:i.value,label:e.$t("labels.login")},null,8,["loading","label"])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{se as default};
