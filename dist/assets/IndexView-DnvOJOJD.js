import{z as R,a as c,N as V}from"./NikkToast-D7YEk3JX.js";import{d as z,u as F,r as v,a as H,b as N,o as T,c as j,e as s,w as r,f as q,g as d,h as a,t as g,i as k,s as A}from"./index-CSluO9mJ.js";import{_ as h}from"./NikkInputPassword.vue_vue_type_script_setup_true_lang-xaTKNkgU.js";import"./index-DtQX2LkE.js";const I={class:"w-full p-3 overflow-y-auto"},M={class:"text-center"},O={class:"text-center text-3xl md:text-4xl font-light mb-0"},$={class:"flex items-center justify-center"},D={class:"font-light text-sm me-1"},U=z({__name:"IndexView",setup(Z){const x=F(),t=v(!1),n=q(),C=H(),{t:y}=N(),i=new V(C,y),P=v({password:"",password_confirmation:""}),S=R(c.object({password:c.string().min(8,{message:"errors.validation.passwords.minCount"}).refine(e=>/[a-z]/.test(e),{message:"errors.validation.mustContain.lowercase"}).refine(e=>/[A-Z]/.test(e),{message:"errors.validation.mustContain.uppercase"}).refine(e=>/d/.test(e),{message:"errors.validation.mustContain.number"}),password_confirmation:c.string().min(8,{message:"errors.validation.passwords.minCount"})}).refine(e=>e.password===e.password_confirmation,{message:"errors.validation.passwords.notSame",path:["password_confirmation"]}));async function B(e){t.value=!0;try{e.valid?(await x.resetPassword({...e.values,email:n.currentRoute.value.query.email,token:n.currentRoute.value.query.token}),i.success("messages.passwordResetSuccess"),n.push({name:"account.login"})):i.error("errors.validation.form","labels.invalidForm")}catch(l){i.httpError(l)}finally{t.value=!1}}return(e,l)=>{const m=d("PrimeButton"),E=d("router-link"),L=d("PrimeCard");return T(),j("div",I,[s(L,{class:"w-full md:w-4/12 2xl:w-3/12 mx-auto mt-10 nikk-card"},{title:r(()=>[a("div",M,[a("h1",O,g(e.$t("labels.resetPassword")),1)])]),content:r(()=>[s(k(A),{class:"py-3 mt-4 flex flex-col gap-5",initialValues:P.value,onSubmit:B,resolver:k(S),validateOnBlur:!0,validateOnSubmit:!0},{default:r(o=>{var u,p,f,w,_,b;return[s(h,{errorHelpLabel:(p=(u=o.password)==null?void 0:u.error)==null?void 0:p.message,id:"password",isError:(f=o.password)==null?void 0:f.invalid,label:"labels.newPassword",name:"password",toggleMask:!0,feedback:!1},null,8,["errorHelpLabel","isError"]),s(h,{errorHelpLabel:(_=(w=o.password_confirmation)==null?void 0:w.error)==null?void 0:_.message,id:"password_confirmation",isError:(b=o.password_confirmation)==null?void 0:b.invalid,label:"labels.confirmPassword",name:"password_confirmation",toggleMask:!0,feedback:!1},null,8,["errorHelpLabel","isError"]),s(m,{type:"submit",loading:t.value,label:e.$t("labels.resetPassword")},null,8,["loading","label"]),a("div",$,[a("span",D,g(e.$t("hints.backToLogin")),1),s(E,{to:"/login",activeClass:"border-b border-primary"},{default:r(()=>[s(m,{text:"",label:e.$t("labels.login")},null,8,["label"])]),_:1})])]}),_:1},8,["initialValues","resolver"])]),_:1})])}}});export{U as default};
